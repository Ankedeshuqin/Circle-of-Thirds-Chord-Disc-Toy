<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
        text { font-family: sans-serif; text-anchor: middle; dominant-baseline: middle; user-select: none; pointer-events: none; } /* SVG text */
    </style>
    <title>三度圈和弦圆盘玩具</title>
</head>
<body>
    <div id="d-left" style="overflow: hidden auto; float: left; width: 12.5%; height: 100%; background-color: pink">
        初始调性主音：<select id="s-ini-key-tonal-tone">
            <option selected>C</option>
            <option>#C</option>
            <option>bD</option>
            <option>D</option>
            <option>#D</option>
            <option>bE</option>
            <option>E</option>
            <option>F</option>
            <option>#F</option>
            <option>bG</option>
            <option>G</option>
            <option>#G</option>
            <option>bA</option>
            <option>A</option>
            <option>#A</option>
            <option>bB</option>
            <option>B</option>
            <option>bC</option>
        </select>
        <hr>
        <div id="d-chord-box" style="text-align: center"><br><br></div>
        <div id="d-chord-description"></div>
        <hr>
        转调：<span id="t-enharmonic" style="color: #0000FF"></span><br>
        <div id="d-before-modul-box" style="text-align: center; font-size: 0.75em; line-height: 1.5; width: 45%; float: left"><br><br></div>
        <div style="text-align: center; width: 10%; line-height: 2; float: left">=</div>
        <div id="d-after-modul-box" style="text-align: center; font-size: 0.75em; line-height: 1.5; width: 45%; float: left"><br><br></div>
        <hr>
        当前调性主音：<span id="t-cur-key-tonal-tone"></span><br>
        <button type="button" id="b-reset">复位</button>
    </div>
    <div id="d-right" style="overflow: auto; height: 100%; background-color: lightyellow">
        <h1 style="line-height: 0; width: 100%; text-align: center">三度圈和弦圆盘玩具</h1>
        <svg xmlns="http://www.w3.org/2000/svg" id="svg" width="1200" height="1200" viewBox="-33 -33 66 66"></svg>
        <h2>说明</h2>
        <p>将调内三和弦、七和弦及其对应常见变和弦，以及各组离调和弦按三度关系围成圈组成圆盘，以用于分析不同和弦的和弦结构、和声功能与和声进行的圆盘玩具。</p>
        <p>圆盘共分为七组扇区，代表以按三度关系排列的调式各级音为根音的和弦，以顺时针方向为向上三度方向。每组扇区分为六列，其中靠近顺时针方向的三列为大调内和弦，靠近逆时针方向的三列为小调内和弦；三列中，位于中间的一列为不含变音的原始调式内的和弦，靠近扇区中线的一列为降调式二级音的变和弦，靠近扇区外侧的一列为大调式中升调式二级音或小调式中降调式四级音的变和弦。</p>
        <p>圆盘共分为六组圈层，代表主调内和弦与向各级调离调的和弦，除第四组圈层代表向大调的SII或小调的dVII离调的和弦外，以从外到内的方向为向上三度方向（因为大调的DVII和小调的sII三和弦为减三和弦，无法作为临时主和弦以用于离调，故作此安排），并以离调和弦在主调中对应级数将主调和弦与离调和弦对齐。每组圈层分为四行，其中外侧的两行从外到内分别代表自然调式与和声调式内的三和弦，内侧的两行为外侧的两行对应的七和弦。</p>
        <p>各组扇区、各组圈层之间以红线隔开。在底盘上标有各扇区所对应的级数。</p>
        <p>用不同背景色代表不同种类（大、小、增、减等）和弦，以便于分析。部分和弦单元格之内标有和弦标记及和弦组成音，其中用蓝色字标出减三度以便于分析增六和弦等音转调；若未标，则和声调式内的和弦与其对应自然调式内的和弦相同、变音调式内的和弦与其对应原始调式内的和弦相同、离调和弦与其对应主调内和弦相同。和弦标记以斯波索宾为基础，但以字母DT、TS表示三级、六级和弦，且必要时使用ø7、o7区分减小七、减七和弦，使用7、M7区分小七度、大七度七和弦。为方便起见，除用于等音转调的和弦外皆不考虑转位。</p>
        <p>鼠标点击和弦单元格可选中该和弦，再次点击或点击空白区域可取消选中。通过键盘方向键可选择不同和弦，ctrl+键盘方向键可跳转至不同组扇区或圈层。选中一个和弦时将播放当前调性主音下的该和弦。</p>
        <p>单元格可拖动，以用于转调。转调时，鼠标选中一个单元格并拖动，选中的单元格和弦将作为中介和弦在旧调中的和声意义进行转调。将和弦拖动至其在新调中的和声意义所对应的单元格上并松开鼠标，即可完成转调。其中，减七和弦、各类含有小七度或减三度的七和弦、增三和弦可用于等音转调。等音转调时，鼠标选中单元格并按住鼠标，此时按下回车键可将其切换至不同的可用于等音转调的转位和弦并作为中介和弦在旧调中的和声意义，然后将转位后的和弦拖动至与其等音的和弦在新调中的和声意义（等音和弦不考虑转位）所对应的单元格上（或不拖动，当转位和弦在旧调中与等音和弦在新调中和声意义相同时）并松开鼠标，即可完成等音转调。鼠标松开前，不可用于转调的和弦单元格将以阴影显示。转调后，圆盘将旋转至新调的主和弦扇区与其在原调中所对应级数的扇区对齐的位置。</p>
        <p>可在页面左上方设置初始调性主音。发生转调时，当前调性主音将改变，但不会影响初始调性主音。点击“复位”按钮可重设当前调性主音为初始调性主音并重设圆盘旋转状态。</p>
        <p>圆盘中心部分标有表示通常可能的和声进行的箭头，其中蓝色箭头表示依靠类属→主的基本关系建立的连接。任何箭头所示和声进行均可朝双向。箭头所示和声进行可能朝向其所指向扇区组中的任何一个和弦，且同组扇区内的不同和弦间亦可能建立连接。鼠标点击箭头后，选中的和弦可切换至箭头所示和声进行后的和弦（七和弦将进行至三和弦）。</p>
        <p style="text-align: right">安可的竖琴</p>
    </div>
    <script src="js.js"></script>
</body>
</html>